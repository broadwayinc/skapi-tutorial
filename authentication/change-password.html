<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>
<script src="../service.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/modern-init-css@latest/init.css">
<link rel="stylesheet" href="../custom.css">

<main id="main_page">
    <form action='update-profile.html' onsubmit="
        disableForm(this, true);
        skapi.changePassword(event).then(()=>alert('Password has been changed.')).catch(err=>alert(err.message)).finally(()=>disableForm(this, false));
    ">
        <div class="spaceBetween">
            <h2>Change Password</h2>
            <a href="update-profile.html">Back</a>
        </div>
        <hr>
        <table>
            <tr>
                <td>
                    <span>
                        Current Password
                    </span>
                </td>
                <td>
                    <input type="password" name="current_password" placeholder="Current Password">
                </td>
            </tr>
            <tr>
                <td>
                    <span>
                        New Password
                    </span>
                </td>
                <td>
                    <input type="password" name="new_password" placeholder="New Password">
                </td>
            </tr>
        </table>
        <br>
        <div class="alignRight">
            <input type="submit" value="Change">
        </div>
    </form>
</main>

<script>
    let user;
    checkProfile({
        kickRoute: '../index.html',
        kickUser: 'unsigned'
    });
</script>