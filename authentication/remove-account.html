<!--
    This page is used to remove the user's account.
    The page is redirected from the update-profile.html page when the user clicks the "Remove Account" link.
-->
<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdn.jsdelivr.net/npm/skapi-js@beta/dist/skapi.js"></script>
<script src="../service.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/style-blank@latest/blank.css">
<link rel="stylesheet" href="../custom.css">

<!--
    Following <script> will check if the user is logged in.
    If the user is not logged in, it will redirect the user to ../index.html page.
-->
<script>
    skapi.getProfile().then(u => {
        if (!u) {
            location.href = '../index.html';
        }
    });
</script>

<main id="main_page">
    <form action='../index.html' onsubmit="
        disableForm(this, true);
        skapi.disableAccount(event).then(()=>alert('Your account is removed.')).catch(err=>alert(err.message)).finally(()=>disableForm(this, false));
    ">
        <div class="spaceBetween">
            <h2>Remove Account</h2>
            <a href="update-profile.html">Back</a>
        </div>
        <hr>
        <h3>Would you like to remove your account?</h3>
        <p>
            Once you remove your account, your account will still be recoverable within 6 months by logging in again and
            verifing your email address.
            <br>
            After 6 months, all your data will be deleted and cannot be recovered.
        </p>
        <p><strong>Note: </strong>Your account cannot be recovered if you have not verified your email address.</p>
        <p>If you would like to proceed, please click the button below.</p>
        <br>
        <div class="alignCenter">
            <input type="submit" value="Remove Account">
        </div>
    </form>
</main>