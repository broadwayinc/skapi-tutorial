<!--
    This is the forgot password page.
    It has a simple form with a single input field for the user to input his/her login email address.
    User can request for a verification code to be sent to his/her email address for resetting their password.
-->
<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>
<script src="../service.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/style-blank@latest/blank.css">
<link rel="stylesheet" href="../custom.css">
<main id="main_page">
    <!--
        Following <form> will send the verification code to the user's email address.
        We will use the skapi.forgotPassword() method to send the verification code to the user's email address.
        When the form is submitted, 6 digits verification code will be sent to the user's email address.
        Then, the user will be redirected to reset-password.html.
        Note that the form action is 'reset-password.html#{email}'.
        Skapi will automatically replace the placeholder {email} to the value of the input named "email", which will be the users address.
        We can use the value of the placeholder in the reset-password.html page to pre-fill the email address input field.
    -->
    <form action='reset-password.html#{email}' onsubmit="
        disableForm(this, true);
        skapi.forgotPassword(event).catch(err=>alert(err.message)).finally(()=>disableForm(this, false));
    ">
        <div class="spaceBetween">
            <h2>Forgot Password</h2>
            <a href="../index.html">Back</a>
        </div>
        <hr>
        <p>
            Input your login email address below and click on 'Submit'.
            You will receive an email with a 6 digits verification code for resetting your password.
        </p>
        <br>
        <div class="alignCenter">
            <input type="email" name="email" placeholder="your@account.email">
            <input type="submit" value="Submit">
            <style>
                input {
                    margin: 4px 0;
                }
            </style>
        </div>
        <br>
        <p><strong>Note: </strong>If your account's email address is not verified, you will not be able to reset your password.</p>
    </form>
</main>